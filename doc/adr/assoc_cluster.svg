<svg xmlns="http://www.w3.org/2000/svg" width="1792.859375px" height="814.328125px" class="sequence simple"><desc>Associating a Cluster</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"/></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"/></marker></defs><g class="title"><rect x="10" y="10" width="212.171875" height="29.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="15" y="30" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">Associating a Cluster</tspan></text></g><g class="actor"><rect x="10" y="49.171875" width="68.140625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="20" y="74.171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">Carol</tspan></text></g><g class="actor"><rect x="10" y="755.15625" width="68.140625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="20" y="780.15625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">Carol</tspan></text></g><line x1="44.0703125" x2="44.0703125" y1="88.34375" y2="755.15625" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="actor"><rect x="459.140625" y="49.171875" width="77.765625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="469.140625" y="74.171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="469.140625">gitops</tspan></text></g><g class="actor"><rect x="459.140625" y="755.15625" width="77.765625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="469.140625" y="780.15625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="469.140625">gitops</tspan></text></g><line x1="498.0234375" x2="498.0234375" y1="88.34375" y2="755.15625" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="actor"><rect x="854.59375" y="49.171875" width="116.265625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="864.59375" y="74.171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="864.59375">GitOpsRepo</tspan></text></g><g class="actor"><rect x="854.59375" y="755.15625" width="116.265625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="864.59375" y="780.15625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="864.59375">GitOpsRepo</tspan></text></g><line x1="912.7265625" x2="912.7265625" y1="88.34375" y2="755.15625" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="actor"><rect x="1265.5859375" y="49.171875" width="164.40625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="1275.5859375" y="74.171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1275.5859375">Staging Cluster</tspan></text></g><g class="actor"><rect x="1265.5859375" y="755.15625" width="164.40625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="1275.5859375" y="780.15625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1275.5859375">Staging Cluster</tspan></text></g><line x1="1347.7890625" x2="1347.7890625" y1="88.34375" y2="755.15625" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="actor"><rect x="1704.34375" y="49.171875" width="58.515625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="1714.34375" y="74.171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1714.34375">Flux</tspan></text></g><g class="actor"><rect x="1704.34375" y="755.15625" width="58.515625" height="39.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="1714.34375" y="780.15625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1714.34375">Flux</tspan></text></g><line x1="1733.6015625" x2="1733.6015625" y1="88.34375" y2="755.15625" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="signal"><text x="218.09375" y="118.7578125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="218.09375">gitops init</tspan></text><line x1="44.0703125" x2="498.0234375" y1="127.515625" y2="127.515625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="604.2890625" y="157.9296875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="604.2890625">creates a GitOps repo</tspan></text><line x1="498.0234375" x2="912.7265625" y1="166.6875" y2="166.6875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="508.0234375" y="197.1015625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="508.0234375">creates a PR with the directory structure</tspan></text><line x1="498.0234375" x2="912.7265625" y1="205.859375" y2="205.859375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="note"><rect x="932.7265625" y="225.859375" width="221.796875" height="67.578125" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="937.7265625" y="245.859375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="937.7265625">.weave-gitops/apps</tspan><tspan dy="1.2em" x="937.7265625">.weave-gitops/clusters</tspan><tspan dy="1.2em" x="937.7265625">.weave-gitops/profiles</tspan></text></g><g class="signal"><text x="271.046875" y="318.4375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="271.046875"/></text><line x1="498.0234375" x2="44.0703125" y1="313.4375" y2="313.4375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="386.7578125" y="343.8515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="386.7578125">Carol Merges the PR</tspan></text><line x1="44.0703125" x2="912.7265625" y1="352.609375" y2="352.609375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="69.0703125" y="387.1953125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="69.0703125">Carol sets her kubectl context to `staging`</tspan></text><line x1="44.0703125" x2="64.0703125" y1="372.609375" y2="372.609375" stroke="#000000" fill="none" style="stroke-width: 2;"/><line x1="64.0703125" x2="64.0703125" y1="372.609375" y2="396.78125" stroke="#000000" fill="none" style="stroke-width: 2;"/><line x1="64.0703125" x2="44.0703125" y1="396.78125" y2="396.78125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="203.65625" y="422.1953125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="203.65625">gitops install</tspan></text><line x1="44.0703125" x2="498.0234375" y1="430.953125" y2="430.953125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="541.71875" y="461.3671875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="541.71875">creates a PR with a cluster record</tspan></text><line x1="498.0234375" x2="912.7265625" y1="470.125" y2="470.125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="note"><rect x="932.7265625" y="490.125" width="395.0625" height="29.171875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="937.7265625" y="510.125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="937.7265625">Add file ./clusters/staging/cluster.yaml</tspan></text></g><g class="signal"><text x="720.7421875" y="549.7109375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="720.7421875">Install GitOps Run Time (flux controllers)</tspan></text><line x1="498.0234375" x2="1347.7890625" y1="558.46875" y2="558.46875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="552.28125" y="588.8828125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="552.28125">Install GitOps Automation (Kustomization) for ./clusters/staging/cluster.yaml</tspan></text><line x1="498.0234375" x2="1347.7890625" y1="597.640625" y2="597.640625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="271.046875" y="622.640625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="271.046875"/></text><line x1="498.0234375" x2="44.0703125" y1="617.640625" y2="617.640625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="348.25" y="648.0546875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="348.25">Carol merges the cluster PR</tspan></text><line x1="44.0703125" x2="912.7265625" y1="656.8125" y2="656.8125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="1149.8828125" y="687.2265625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1149.8828125">Flux picks up the change in the repo</tspan></text><line x1="912.7265625" x2="1733.6015625" y1="695.984375" y2="695.984375" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="1357.7890625" y="726.3984375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1357.7890625">Flux applies the change to the cluster</tspan></text><line x1="1733.6015625" x2="1347.7890625" y1="735.15625" y2="735.15625" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g></svg>